<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/jpeg" href="logonys.jpg">
<title>Panier — NewYork in Senegal</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { background: #F5EFE6; font-family: 'Poppins', sans-serif; color: #2A2A2A; }
.cart-item img { width: 80px; height: 80px; object-fit: cover; border-radius: 6px; }
button { cursor: pointer; }
</style>
</head>
<body>

<!-- HEADER -->
<header class="bg-[#FAFAF7] shadow-sm border-b border-[#C89F72]/40">
  <div class="max-w-7xl mx-auto px-4 flex items-center justify-between h-20">
    <a class="flex items-center gap-3" href="index.html">
      <img src="logonys.jpg" class="h-12 w-auto object-contain">
      <div>
        <div class="text-lg font-bold text-[#4A2E18]">NewYork in Senegal</div>
        <div class="text-xs text-[#C89F72] -mt-1 tracking-wide">Mode & Lifestyle</div>
      </div>
    </a>
  </div>
</header>

<section class="max-w-7xl mx-auto px-4 py-6">
  <h1 class="text-3xl font-bold text-[#4A2E18] mb-4">Votre Panier</h1>
  <div id="cart-items" class="space-y-4"></div>

  <div class="mt-6 text-right">
    <p>Total articles: <span id="total-items">0</span></p>
    <p class="text-xl font-bold">Total: <span id="total-price">0 FCFA</span></p>
    <div class="mt-4 flex gap-4 justify-end">
      <button class="bg-[#4A2E18] text-white py-2 px-4 rounded hover:bg-[#C89F72]" onclick="checkoutWave()">Payer avec WAVE</button>
      <button class="bg-[#4A2E18] text-white py-2 px-4 rounded hover:bg-[#C89F72]" onclick="checkout('om')">Payer avec OM</button>
    </div>
  </div>
</section>

<script>
// Récupérer le panier
let cart = JSON.parse(localStorage.getItem('nysCart')) || [];
const cartContainer = document.getElementById('cart-items');
const totalPriceEl = document.getElementById('total-price');
const totalItemsEl = document.getElementById('total-items');

function renderCart() {
  cartContainer.innerHTML = '';
  let total = 0, count = 0;
  cart.forEach(item => {
    total += item.price * item.quantity;
    count += item.quantity;

    cartContainer.innerHTML += `
      <div class="cart-item bg-[#FAFAF7] rounded-lg shadow p-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
          <img src="${item.image}">
          <div>
            <p class="font-semibold">${item.name}</p>
            <p class="text-[#4A2E18] font-bold">${item.price.toLocaleString()} FCFA</p>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <input type="number" value="${item.quantity}" min="1" class="w-16 border rounded text-center quantity" onchange="updateQuantity('${item.name}', this.value)">
          <span class="cursor-pointer text-red-500 font-bold" onclick="removeItem('${item.name}')">✕</span>
        </div>
      </div>
    `;
  });
  totalPriceEl.textContent = total.toLocaleString() + ' FCFA';
  totalItemsEl.textContent = count;
}

function updateQuantity(name, qty) {
  cart = cart.map(item => item.name === name ? {...item, quantity: parseInt(qty)} : item);
  localStorage.setItem('nysCart', JSON.stringify(cart));
  renderCart();
}

function removeItem(name) {
  cart = cart.filter(item => item.name !== name);
  localStorage.setItem('nysCart', JSON.stringify(cart));
  renderCart();
}

function checkout(method) {
  if(cart.length === 0) { alert("Votre panier est vide !"); return; }
  alert(`Paiement via ${method.toUpperCase()} en cours...`);
  // Ici, tu peux intégrer l'API WAVE ou OM avec leur documentation
}

renderCart();
</script>
 <!-- Bouton WhatsApp flottant -->
  <a href="https://wa.me/221773737477" target="_blank"
     class="fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg flex items-center justify-center z-50 whatsapp-bounce">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
      <path d="M20.52 3.48A11.94 11.94 0 0012 0C5.37 0 .01 5.37.01 12a11.93 11.93 0 001.91 6.18L0 24l5.94-1.92A11.94 11.94 0 0012 24c6.63 0 12-5.37 12-12 0-3.19-1.24-6.19-3.48-8.52zM12 22.08c-2.05 0-3.95-.62-5.56-1.68l-.4-.27-3.52 1.14 1.14-3.42-.26-.41A9.935 9.935 0 012.08 12c0-5.49 4.47-9.96 9.96-9.96 2.66 0 5.16 1.04 7.04 2.93 1.88 1.88 2.92 4.38 2.92 7.03 0 5.49-4.47 9.96-9.96 9.96zm5.44-7.44c-.3-.15-1.78-.88-2.05-.98-.27-.1-.47-.15-.67.15-.2.3-.78.98-.95 1.18-.17.2-.34.22-.64.08-.3-.15-1.26-.46-2.4-1.47-.89-.79-1.48-1.77-1.65-2.07-.17-.3-.02-.46.13-.61.13-.13.3-.34.45-.51.15-.17.2-.3.3-.5.1-.2.05-.38-.03-.53-.08-.15-.67-1.62-.92-2.23-.24-.58-.49-.5-.67-.51l-.57-.01c-.2 0-.53.07-.81.38s-1.06 1.04-1.06 2.55c0 1.5 1.08 2.96 1.23 3.17.15.2 2.12 3.22 5.13 4.52.72.31 1.28.49 1.72.63.72.23 1.38.2 1.9.12.58-.09 1.78-.73 2.03-1.44.25-.71.25-1.32.18-1.44-.07-.12-.27-.2-.57-.35z"/>
    </svg>
  </a>
  <script>
function checkoutWave() {
  if (cart.length === 0) {
    alert("Votre panier est vide !");
    return;
  }

  // Générer un numéro de commande aléatoire
  const orderId = 'NYS-' + Math.floor(100000 + Math.random() * 900000);

  // Sauvegarder le numéro dans le localStorage pour l'afficher après
  localStorage.setItem('nysOrderId', orderId);

  // (Optionnel) Tu pourrais aussi sauvegarder le total :
  localStorage.setItem('nysOrderTotal', totalPriceEl.textContent);

  // Rediriger vers ton lien Wave
  window.location.href = "https://pay.wave.com/m/M_v6rwCzRuoFoJ/c/sn/";
}
</script>
</body>
</html>
